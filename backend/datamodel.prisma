type User{
    id: ID! @id
    email: String! @unique
    encryptedPassword: String!
    Name: String
    studentNumber: String
    phoneNumber: String
    sex: String
    isMaster: Club @relation(name:"ClubMaster")
    notifications:[Notification] @relation(name:"UserNotification")
    applications:[Application] @relation(name: "AplUser", link: INLINE)
    rooms:[Room] @relation(name: "UserRoom", link: INLINE)
    clubs:[Club] @relation(name: "ClubMember")
    university: String!
    major: String!
    auth: Boolean
}

type Club{
    id: ID! @id
    name: String!
    bio: String!
    description: String!
    type: String!
    socialUrl: String
    socialDisplay: Boolean @default(value:false)
    clubImage: File @relation(name:"ClubImg")
    master: User! @relation(name:"ClubMaster", link: INLINE)
    questions: [Question] @relation(name:"ClubQuestion")
    applications: [Application] @relation(name:"ClubApp", link: INLINE)
    members:[User] @relation(name: "ClubMember", link: INLINE)
    posts:[Post] @relation(name: "ClubPost", link: INLINE)
    application_description: String!
    logoImage: File @relation(name:"LogoImg")
}

type Room{
    id: ID! @id
    participants: [User!]! @relation(name: "UserRoom")
    messages: [Message!]! @relation(name: "RoomMessage")
}

type Message {
    id: ID! @id
    text: String!
    from: User! @relation(name: "From", link: INLINE)
    to: User!   @relation(name: "To", link: INLINE)
    room: Room! @relation(name: "RoomMessage", link: INLINE)
    created: DateTime! @createdAt
}

type Question{
    id: ID! @id
    owner: Club! @relation(name:"ClubQuestion", link: INLINE)
    subject: String
    type: String
    options:[String] @scalarList(strategy: EMBEDDED)
}

type Application{
    id: ID! @id
    user: User! @relation(name: "AplUser")
    club: Club! @relation(name:"ClubApp")
    answer: [String]! @scalarList(strategy: EMBEDDED)
    status: String @default(value:"UNCHECKED")
    created: DateTime! @createdAt
}

type Notification{
    id: ID! @id
    user: User! @relation(name:"UserNotification", link:INLINE)
    content: String!
    checked: Boolean! @default(value:false)
    created: DateTime! @createdAt
}

type File{
    id: ID! @id
    url: String!
    club: Club! @relation(name:"ClubImg", link: INLINE)
    clublogo: Club @relation(name:"LogoImg", link: INLINE)
}

type Post{
    id: ID! @id
    title: String!
    content: String!
    user: User! @relation(name:"UserPost", link: INLINE)
    club: Club! @relation(name:"ClubPost")
    files: [File!]! @relation(name:"PostFile", link: INLINE)
    type: String @default(value:"NORMAL")
    comments:[Comment!] @relation(name:"PostComment", link: INLINE)
    status: String! @default(value:"ORIGINAL")
    created: DateTime! @createdAt
    updated: DateTime @updatedAt
}

type Comment{
    id: ID! @id
    user: User!@relation(name:"UserComment", link: INLINE)
    post: Post! @relation(name:"PostComment")
    content: String!
    status: String! @default(value:"ORIGINAL")
    created: DateTime! @createdAt
    updated: DateTime @updatedAt
    subComments: [SubComment] @relation(name:"SubComment", link: INLINE)
}

type SubComment{
    id: ID! @id
    user: User!@relation(name: "SubCommentUser", link: INLINE)
    content: String!
    status: String! @default(value:"ORIGINAL")
    created: DateTime! @createdAt
    updated: DateTime @updatedAt
    comment: Comment! @relation(name:"SubComment")
}

type Secret{
    id: ID! @id
    email: String!
    secret: String!
    auth: Boolean @default(value:false)
}
